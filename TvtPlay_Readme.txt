TVTest TvtPlay Plugin ver.1.3(人柱版) + BonDriver_Pipe.dll
                                      + TvtAudioStretchFilter.ax

■概要
TVTest付属のBonDriver_UDPまたは専用のBonDriver_Pipeを使ってローカルTSファイルを
再生するプラグインです。
ver.1.xは人柱版です。今後の大幅な機能追加や機能削除、大きな不具合などあるかもし
れません。問題があればとりあえずver.0.9r5に戻ってください(設定ファイルはそのまま
で大丈夫です)。

■動作環境
・Windows XP以降(ただしVistaは未確認)
・TVTest ver.0.7.16 以降、or対応するTVH264
・通常版: Visual C++ 2005 SP1 再頒布可能パッケージ(TVTestが起動するなら入ってる)
・x64版:  Visual C++ 2010 SP1 再頒布可能パッケージ (x64)
          # ↑ver.0.9以降、x64版はSP1の方をインストールする必要があるので注意

■以前のバージョンからの移行
設定ファイルTvtPlay.iniは基本的にそのまま引き継げます。ただし、ボタンのアイコン
用画像の配置転換などで、設定キーButton02～Button15のデフォルトが一部変更されてい
ます。ボタンアイコンがおかしくなった場合は、一度これらのキーをメモ帳などを使って
削除してみてください。
設定キーToBottomは廃止されました(詳細は「更新履歴」参照)。ToBottomを[=0]で使用し
ていた方は[=1]の動作にもどるので、新しい設定キーRowPosFullで調整してください。
(ver.1.2r2からの移行)
  TvtPlay.tvtpとTvtAudioStretchFilter.axとを置きかえてください。
(ver.1.2以前からの移行)
  TvtPlay.tvtpとBonDriver_Pipe.dllとTvtAudioStretchFilter.axとを置きかえてくださ
  い。

■使い方
TVTestのPluginsフォルダにTvtPlay.tvtpを入れてください。BonDriver_Pipe.dllは使用
しないならば捨ててください(後述の「BonDriver_Pipe.dllについて」を参照)。なお、
TvtPlay(x64).tvtpはx64版のTVTest利用者向けです。

TVTest起動オプションの最後に拡張子.ts .m2t .m2ts .m3u .tslist いずれかのファイル
パスを付加するとプラグインは有効になり、起動時にそのファイルを開きます。起動オプ
ションについては後述の「TVTest起動オプションについて」も参照してください。
例:
  TVTest.exe /d BonDriver_UDP.dll foo.ts
  # TVTestのデフォルトのBonDriverに"BonDriver_UDP.dll"を指定している場合、
  # /d BonDriver_UDP.dllは不要

起動するとTVTestウインドウ下部にコントロールが表示されます。デザイン的にTVTestの
ウインドウ枠を細くすることをお勧めします。コントロール左側の12個のボタンは左から
、ファイルを開く、リピート設定、シーク-60秒/-15秒/-5秒、一時停止、シーク5秒/15秒
/60秒、次のファイル・末尾シーク、倍速再生200%/50%、です。なお、「ファイルを開く
」ボタンを右クリックすると、TVTestの録画フォルダにある.tsファイルを簡易表示しま
す。また、「次のファイル・末尾シーク」を右クリックすると再生リストを表示します。
コントロール中央はシークバーになっていて、左クリックで任意の位置にシーク、右クリ
ックで再生を一時停止/再開します。コントロール右側には再生位置および総再生時間が
表示されます。

倍速再生を利用する方は音声フィルタの設定が必要です。倍速再生はBonDriver_Pipe.dll
の使用をお勧めします。同梱のDirectshowフィルタTvtAudioStretchFilter.axを適当なフ
ォルダに入れ、コマンドプロンプトから管理者権限で regsvr32 {フィルタのパス} と入
力してください(この辺は「DirectShowフィルタ 登録」あたりでググってください)。無
事登録されていれば、TVTestの設定->再生->音声フィルタにこのフィルタが現れるので、
これを選択してください。

*** 以下、必要に応じてお読みください ***

■BonDriver_Pipe.dllについて
BonDriver_UDPのプロセス間通信方式をパイプに改変したものです。転送中にドロップし
ないのと、UDP/IPのスタックを介さないので軽い(はず…)のが利点です。興味のある方は
使ってみてください。TVTestに対してはBonDriver_UDPのフリをするので、BonDriver_UDP
と同じ要領で使ってください。BonDriver_UDPと同時使用もできます。
導入にはVisual C++ 2005 SP1 再頒布可能パッケージ(x64版はVisual C++ 2010 SP1 再頒
布可能パッケージ (x64))が必要です。x64版はファイル名を必ず"BonDriver_Pipe.dll"に
リネームしてください。

■TVTest起動オプションについて
TVTest起動時につぎのようなオプションを追加することで、プラグインの有効・無効の自
動化などが可能です。
/tvtpudp          BonDriver_UDP.dllの使用の有無でプラグインを有効・無効にする
/tvtpudp /tvtplay 上述の動作＋ファイルパスの拡張子を問わない
/tvtpipe          BonDriver_Pipe.dllについて/tvtpudpと同様(同時指定もできる)
/tvtplay          起動時にプラグインを有効化＋ファイルパスの拡張子を問わない
# 以上のオプションは複数起動禁止のTVTest起動中に追加できます(削除はできません)
/tvtpofs <ms>[+-]<ofs>
                  初期再生位置をミリ秒で指定する。
                  例: /tvtpofs 30000      # 30秒の位置から再生
                      /tvtpofs 30000-3000 # 27秒の位置から再生

■読み込み可能なプレイリストファイル
プレイリストファイル仕様はおおむねBonDriver_File+TVTestPluginに準拠します。拡張
子.m3uまたは.tslistをもつテキストファイルにファイルパスを絶対パスまたは相対パス
で列挙してください。'#'で始まる行はコメントとして無視します。また'"'の対応があれ
ば取り除くので、Vista以降の「パスとしてコピー」のコピペでもプレイリストになりま
す。読み込み可能な文字コードはUTF-16LE(Unicode)、UTF-16BE、UTF-8です。BOM(Byte
Order Mark)の無いものはUTF-8と判断します。

■倍速再生について
倍速再生は音声を伸び縮みさせることで実現しています。動画をスキップさせているわけ
ではないので、速度に応じてシステムの負荷が高まります。また、BonDriver_UDP.dllを
使っている場合や、動画にドロップやエラーのある箇所では、あまり高速に再生すると数
秒～数十秒間TVTestが固まるようです。しばらく放っておけば戻りますが、あまり再生速
度を上げすぎないように注意してください。
また、倍速再生に使用するTvtAudioStretchFilterですが、倍速再生時以外は何も処理を
しない(Waveデータを通過させるだけ)ので、このフィルタを設定するだけで負荷が上がっ
たりすることはおそらく無いです。

■TvtAudioStretchFilterの追加機能
TVTestの音声フィルタを一つしか指定できないことへの対策として、ver.0.9r3以降に添
付のTvtAudioStretchFilterでは、接続するDirectShowフィルタを1つだけ指定できるよう
になりました。たとえば、フィルタを置いたフォルダに"TvtAudioStretchFilter.ini"を
次のような内容で作成すると、ffdshowがインストールされていて、"Uncompressed"形式
が有効に設定されていれば、フィルタの後続にffdshow Audio Decoderが接続されます。
ver.1.3以降に添付のフィルタは5.1ch音声に対応しています。S/PDIFパススルーには未対
応なので注意してください。

[TvtAudioStretchFilter]
AddFilter={0F40E1E5-4F79-4988-B1A9-CC98794E6B55}

(エラーメッセージ)
  「追加のフィルタを生成できません。」
  AddFilterに指定したDirectShowフィルタが見つからなかったときに表示されます。

(上級者向け)
  一般に1入力1出力のPCM音声フィルタであれば(おそらく)何でも追加できます。
  AddFilterにはDirectShowフィルタのクラス識別子(CLSID)を指定してください。CLSID
  はGraphEditを使うか、レジストリキーHKEY_CLASSES_ROOT\CLSID内部をフィルタ名(
  FriendlyName)で検索すれば取得できます。
  フィルタをどのように追加するかは、GraphEditで観察するとよく分かると思います。

■容量確保録画中の追っかけ再生について
ファイル末尾(2秒ぐらい)に有効なTSデータがないとき、そのファイルはEpgDataCap_Bon
やRecTaskのようなファイル容量確保型の録画中であると判断します。このようなファイ
ルの追っかけ再生時にはコントロールの総再生時間の右隣に'*'が表示されます(通常の追
っかけ再生は'+')。また、総再生時間はファイルサイズが初めて減少するタイミングまで
増加し続けます。さらに、「末尾シーク」ボタンや再生時間ぎりぎりの位置へのシークは
機能しない制約があります。

■設定ファイルについて
設定ファイル"TvtPlay.ini"は初回使用時プラグインフォルダに自動作成されます。必要
な場合はこれを直接編集してカスタマイズしてください。以下は設定キーの説明です。

TsRepeatAll / TsRepeatSingle【ver.1.0～】
    再生リスト全体/1ファイルをリピート再生する[=1]かどうか
TsWaitOnStop【ver.1.0～】
    再生終了後、次のファイルの再生開始までの待ち時間(ミリ秒)
    # 値を大きめにすると、TVTest設定の「バッファリングを行う」を指定している場合
    # などに端切れせずに再生できます。
TsResetAllOnSeek
    シーク時にビューアリセットではなく全体リセットをかける[=1]かどうか
TsResetDropInterval【ver.0.5～】
    シーク後にドロップカウントをリセットするために監視する間隔(ミリ秒)、またはリ
    セットしない[=0]
    # シーク後、ドロップカウントの増加が止まれば値をリセットします。
    # 後述の「ドロップカウントについて」も参照
TsThreadPriority【ver.0.7～】
    TSデータの転送スレッドの優先度
    # 通常は変更する必要はありません。
    # システム高負荷時に音声がとぎれたりする場合には、"TVTest.ini"設定ファイルの
    # StreamThreadPriority(「ストリームスレッドの優先度」の設定値)と同じ値にする
    # と改善するかもしれません。
TsStretchMode【ver.0.8～】
    倍速再生モードを指定
    # [=1]再生速度だけ調整します(速度に応じて音が高くなったりします)
    # [=2]ピッチだけ上げ下げします(用途不明)
    # [=3]ピッチと再生速度の両方を調整します
TsStretchNoMuteMax / TsStretchNoMuteMin【ver.0.8～】
    倍速再生の速度が設定値以上/以下なら無音にする
TsConvTo188【ver.0.9～】
    192ByteTS(Timestamped TS)の場合、188ByteTSに変換して転送する[=1]かどうか
TsAvoidWraparound【ver.1.1～】
    ラップアラウンドを避けるようPCR/PTS/DTSタイムスタンプを変更する[=1]かどうか
    # DirectShowのバグによってタイムスタンプが巡回する瞬間に映像が乱れるのを防ぎ
    # ます。Microsoftがこの問題を修正する(かわかりませんが…)までは[=1]をお勧め
    # します。ただし、現在再生中のサービスがスクランブルされている場合は[=0]とし
    # なければ正しく再生されません。
    # この設定は再生位置の表示部分を右クリックで変更できます。
ShowOpenDialog【ver.1.2～】
    プラグイン有効時に「ファイルを開く」ダイアログを表示する[=1]かどうか
    # /tvtpudp /tvtpipeと組みあわせて利用するとTVTestのチャンネル選択画面などで
    # 便利かもしれません。
AutoHide【ver.1.1～】
    RowPosが[=0]でないとき、通常表示時にコントロールを隠す[=1]かどうか
    # この設定は再生位置の表示部分を右クリックで変更できます。
RowPos / RowPosFull【ver.1.1～】
    コントロールを表示する高さを指定
    # [=0]でTVTestウインドウの下、[=1]でステータスバーの位置、[=-1]でタイトルバ
    # ーの位置になります。実用的なのは[=-2]～[=2]の範囲だと思います。
    # RowPosFullの[=0]は[=1]と同じです。
DispOffset【ver.1.2～】
    シークバーに再生位置からの相対位置を表示する[=1]かどうか
DispTot【ver.0.5～】
    シークバーに放送時刻を表示する[=1]かどうか
DispTotOnStatus【ver.0.5～】
    再生位置の表示の隣に放送時刻を表示する[=1]かどうか
    # この設定は再生位置の表示部分を右クリックで変更できます【ver.1.2～】。
StatusItemWidth【ver.0.5～】
    再生位置・総再生時間の表示部分のピクセル幅
    # 何も指定しないかキーを削除すると自動調整します【ver.1.2～】。
TimeoutOnCommand / TimeoutOnMouseMove
    キーコマンド/マウス操作をおこなった後にコントロールを表示する時間をミリ秒で
    指定、または表示しない[=0]
Salt【ver.0.7～】
    0～65535のランダムな値
    # 特にユーザがいじる必要はありません
FileInfoMax【ver.0.7～】
    レジューム情報を記録する最大数、または記録しない[=0]
    # 扱うTSファイルの数より大きくしておけば忘れられることはないでしょう
PopupMax【ver.0.8～】
    フォルダの簡易表示機能でファイルを一覧表示する最大数、またはこの機能を使わな
    い[=0]
    # 最大値は[=100]です。
PopupDesc【ver.0.9～】
    簡易表示機能でファイルを降順表示する[=1]かどうか
PopupPattern【ver.0.8～】
    簡易表示機能で表示するフォルダを指定
    # たとえば[=D:\media\*.ts]とすれば"D:\media"フォルダにある.tsファイルが名前
    # 順にポップアップ表示されます。
    # %RecordFolder% はTVTestの録画フォルダに置き換わります。
IconImage
    アイコン画像を絶対パスかTVTestフォルダからの相対パスで指定
    # プラグインに内蔵されている"src/Buttons.bmp"の画像を置き換えます。高さ16px
    # のモノクロBMPファイルを指定してください。
Seek[A-H]
    シーク時間をミリ秒で指定する
    # ボタンコマンドやキー割り当ての"シーク:A"～"シーク:H"に対応します。
Stretch[A-F]【ver.0.8～】
    倍速再生の速度を、等速にたいする比率(パーセント)で指定する
    # [=25]～[=800]まで設定可能です。
Button[00-15]
    ボタンのアイコン番号とボタンコマンドを指定する
    # フォーマットは "{アイコン番号},{ボタンコマンド}" (全体で127文字まで)
    # {ボタンコマンド}(キー割り当て順):Open,Close,Prev,SeekToBgn,SeekToEnd,Loop,
    #                                  Pause,Seek[A-H],Stretch[A-F],Stretch
    # ';'でコメントアウトするか何も指定しなければそのボタンは消えます。並べ替え
    # もできます。Stretchコマンドは設定キーStretchAから[=100]となる設定キーまで
    # を順に倍速切り替えします【ver.1.1～】。
    # アイコン画像の X座標=(アイコン番号)×16 の位置をアイコンとして使用します。
    # ただし、左上1pxが黒色ならば幅16pxを最大とする可変ピッチです【ver.0.9～】。
    # PauseとLoopとStretch*は切り替えのため複数のアイコンを使います。
    # "{アイコン番号}"のフォーマットについて【ver.0.9～】
    # ・アイコン番号を複数指定(-でつなげる)して、アイコンを合成できます。
    # ・'があれば、続く1文字のASCIIコードをアイコン番号に置き換えます。
    # ・~があれば、以降を画素反転して合成します。
    # ・:があれば、以降は切り替え時のアイコンを合成します。
    # 例:
    #   [ +5m] '+'5-59
    #   [-300] '-23-20-20
    #   [ 35%] '3'5'%:30~'3'5'%
    #   [x1.0:x4.0:x2.0:x0.5:x0.2]
    #          '*'1' '.'0:30~'*'4'.'0:30~'*'2'.'0:30~'*'0'.'5:30~'*'0'.'2

[FileInfo]セクション【ver.0.7～】
    レジューム情報のリスト
    # TSファイルの先頭2キロバイトとSaltから得られたハッシュ値と、そのファイルの
    # レジューム位置(ミリ秒)の対応データが書き込まれます。
    # 対応データは使われなかった順に消えていきます。
    # 元のTSファイルがなければ、どのようなファイルを開いたかを特定されることはあ
    # りません。

[ColorScheme]および[Style]セクション【ver.0.9～】
    セクションがあれば、デザインをプラグインで個別に設定する
    # TvtPlayは、起動時に"TVTest.ini"からこれらのセクションを読みこんでコントロ
    # ールのデザインを設定していますが、これを個別に設定できます。おもにTVTest本
    # 体の仕様変更への保険を目的としています。

[Status]セクション【ver.1.0～】
    セクションがあれば、フォントをプラグインで個別に設定する
    # 前述と同様に仕様変更への保険を目的としています。以下4つのキーを使います:
    # FontName / FontSize / FontWeight / FontItalic

■ドロップカウントについて
シークを行うとTVTestステータスバーのドロップカウントは増加します。これはTSパケッ
トの巡回カウンタ(continuity counter)が不連続になるためで、正常な動作です。
また、この巡回カウンタは重畳するパケットのPIDごとにカウントアップしていくので、
送出頻度の低いパケット(EITやTOTなど)はドロップ判定が遅れます。シーク数秒～十数秒
後にドロップカウントがいくらか増えることがあるのは、おそらくこれが原因です。この
挙動が気持ちわるいひとはTsResetAllOnSeekを1にするかTsResetDropIntervalを大きめの
値(2000～4000程度)にしてみてください。

■仕様
・TVTest ver.0.7.20以前では、シーク後に音無しor映像無しになることがあります。当
  方ではシーク200回のうち7回発生しました。発生したときはビューアリセットしたりも
  う一度シークしたりしてください。
・総再生時間の表示は数秒以内の誤差がでる場合があります。また、総再生時間はファイ
  ル先頭および末尾の情報から算出した値なので、カット編集されている場合は不正確に
  なります
・26.5時間以上のTSファイルはおそらく正しく再生できません(Program Clock Reference
  が巡回する関係上)
・再生位置から一度に13.2時間以上離れた位置にシークすると、誤った位置に飛びます
・追っかけ再生に対応しています
・追っかけ再生中の総再生時間は推計です
・勢いでつくったので不具合もけっこうあるかも

■ソースについて
当プラグインの作成にあたり、EpgDataCap_BonのEpgTimerPlugInを参考にしました。また
、PCR/PTS/DTSタイムスタンプの変更コードの作成にあたり、TsTimeKeeper Ver 3.4.15.0
を参考にしました。
TSファイルの同期・解析のために、tsselect-0.1.8(
http://www.marumo.ne.jp/junk/tsselect-0.1.8.lzh)よりソースコードを改変利用してい
ます。
TvtAudioStretchFilterフィルタは、再生レート制御のために、SoundTouchライブラリver
.1.6.0(http://www.surina.net/soundtouch/)を利用しています。
デフォルトのアイコン画像"Buttons.bmp"は、「HDUS関係ファイル置き場」(
http://2sen.dip.jp/)のup0598.zip「非公式 TvtPlayシークボタンカスタマイズ用アイコ
ン 修正2」のデザインをもとに作成しています。
また、おもにTVTest ver.0.7.23からソースコードを流用しています。特に以下のファイ
ルはほぼ改変なしに流用しています(差分は"diff_TVTestStatusView_orig.txt"を参照)
  "Aero.cpp"
  "Aero.h"
  "BasicWindow.cpp"
  "BasicWindow.h"
  "ColorScheme.cpp"
  "ColorScheme.h"
  "DrawUtil.h"
  "DrawUtil.cpp"
  "Settings.cpp"(From: ver.0.7.21r2)
  "Settings.h"(From: ver.0.7.21r2)
  "StatusView.cpp"
  "StatusView.h"
  "Theme.cpp"
  "Theme.h"
  "WindowUtil.cpp"
  "WindowUtil.h"
ソースコメントに流用元を記述しています。流用部分については流用元の規約に注意し、
その他の部分は勝手に改変・利用してもらって構いません。

■更新履歴
ver.1.3 (2011-12-10)
・TvtAudioStretchFilterを5.1ch対応にした
・容量確保録画の追っかけ再生でのシーク失敗時の挙動を改善
・ファイルの読み出し単位を上げ、関連するコードを整理
・シーク動作のパフォーマンス改善
・メッセージポスト部分の微バグ修正(送り過ぎてた)
ver.1.2r2 (2011-11-24)
・BonDriver_Pipeの以下の不具合修正
  ・ドライバの初期化と再生開始のタイミングが重なった場合に、TVTestをフリーズさせ
    てしまうことがある
・全画面表示でドラッグ&ドロップできるように戻した
・TVTest待機状態(常駐モード)を考慮した
ver.1.2 (2011-11-22)
・「ファイルを開く」ダイアログを複数選択可能にしてプラグイン有効時に表示できるよ
  うにした
・再生位置の表示幅(設定キーStatusItemWidth)をデフォルトで自動調整するようにした
・シーク位置の描画方法をすこし変更した
・設定キーDispOffsetを追加した(個人的な需要)
ver.1.1r2 (2011-11-10)
・以下3点を修正した
  ・アダプテーションフィールド長の計算ミスにより、高頻度でPTS/DTSが書き換えられ
    ない(該当箇所の指摘ありがとうございます)
  ・複数起動禁止での起動時に1番目のコマンドオプションが無視される
  ・マルチディスプレイ環境で、プライマリ以外での全画面表示状態でプラグインを有効
    にすると、コントロールがプライマリに表示される(修正できたか不明)
ver.1.1 (2011-11-09)
・以下2点を修正した(バグ報告サンクスです)
  ・再生リストが1つだけのときに全体リピートが働かない
  ・「ファイルを開く」ダイアログ使用後にカレントディレクトリが変更されてしまう
・コントロールの位置をカスタマイズできるようにした
・倍速設定を6個にして倍速切り替えボタン(Stretch)を追加した
・タイムスタンプの巡回位置を26時間20分後に移動することで、ラップアラウンド時の
  DirectShowの問題を回避できるようにした
・オプション/tvtpofsを追加し、初期再生位置を指定できるようにした
・設定キーMarginを廃止(自動取得に変更)
・設定キーToBottomを廃止(RowPosFullに吸収)
ver.1.0 (2011-10-30)
・コントロールのフォントをTVTestステータスバーのものと合わせるようにした
・再生オフで一時停止するようにした
・再生リストを設けた
・プレイリストファイルの読み込みに対応した
・設定キーButton02のリピート設定ボタンをデフォルトで表示するようにした
・設定キーTsAutoClose/TsAutoLoopを廃止した
  ・今後はTsAutoClose=1(ファイルを再生終了後に閉じる)相当で動作
・ver.1.xの人柱期間中はver.0.9r3のバグにも対応予定
ver.0.9r3 (2011-10-20)
・TVTest ver.0.7.23でボーダーの配色方法が微妙に変化したので追随
・"TVTest.ini"の読み込み部分を0.7.21r2ベースに戻して軽量化+今後のTVH264に対応
・"TvtPlay.ini"のFileInfoセクションの読み込み部分を効率化
・TvtAudioStretchFilterに機能追加
・ver.1.0は人柱版になるかもしれない(ならないかもしれない)
ver.0.9r2 (2011-10-03)
・ドライバ変更時のチャンネル設定の問題が解決されたので、TVTest ver.0.7.22以降に
  ついて、ver.0.8r2での仮対応を元にもどした
・TVTestのINI読み書き方法の変更により、デザインを適用できないことがあるのを修正
・書き込みを参考に簡易一覧表示のキー割り当てを「ファイルを開く(ポップアップ)」の
  みにもどした(もう一回押すと閉じる)
・プラグインの説明(設定->プラグイン->一覧)にバージョンを表記するようにした
ver.0.9 (2011-10-02)
・2sen(hdusup)のup0598を可変ピッチにして流用し、アイコン合成できるようにした
  ・デザインされた方、感謝します
・192ByteTSを188ByteTSに変換して転送できるようにした
・容量確保録画の追っかけ時に総再生時間-3秒に達したら等速再生に戻すようにした
・降順に簡易一覧表示できるようにした
・簡易一覧表示をリモコン操作できるようにした
  ・ちゃんとできるか不明、レスを待ちます
・コントロールのデザインを独自に設定できるようにした
・倍速再生時のフリーズを軽減した
ver.0.8r2 (2011-09-20)
・"倍速再生"の方が正しそうなので用語をあらためた
・容量確保録画の追っかけ再生を考慮した
・フルスクリーン時のマルチディスプレイでの動作、以下2点を修正した
  ・縦サイズが異なるモニタを使っている場合
  ・全画面切り替え時にバーが画面外にいる場合
・複数起動禁止時の起動オプションからのUDP/Pipeへのドライバ変更時、チャンネルセッ
  トするようにした(問題が解決するまでの仮対応)
・簡易一覧表示のポップアップをキー割り当て可能にした
  ・リモコン対応は次バージョン以降
ver.0.8 (2011-09-16)
・早送り機能を追加した
・指定フォルダの簡易一覧表示を追加した
ver.0.7 (2011-09-02)
・移動・リサイズで意味もなくコントロールをアクティブにしてたのを修正
  ・スレで指摘してくれた方、感謝です
・ループ再生時、再生終了後に1秒弱待つようにした
・フルスクリーン時にコントロールを出すとマルチメディアキーが効かなくなるのを修正
・最大化時のコントロールの位置をちょっと工夫した
・放送時刻表示がいまいち見づらかったので書きこみを参考に微調整
・x64版を追加した(Windows7でしかテストしてない)
・設定キーTsThreadPriorityを追加した
・オプション/tvtpudp /tvtpipeを追加した
・簡単なレジューム機能をつけた
ver.0.6 (2011-08-29)
・デッドロックの問題が解決されたので、TVTest ver.0.7.21以降についてビューアリセ
  ットをシーク直前からシーク後にもどした
・ver.0.7.21以降のウインドウ枠に対応、設定キー Margin を追加
・GUIまわりのTVTestからの流用コードについて、ver.0.7.21での修正分をマージ
・基本機能がそろったのでver.0.xの機能追加は停止
  ・おもにバグ修正のみになります
  ・つぎに機能追加するときはver.1.xの人柱版になる予定です
ver.0.5 (2011-08-27)
・対応するTVTestをver.0.7.16に引き上げた(実際にはTvtPlay0.3からこうだった)
・ファイルを開きなおしたときに再生ボタンを再描画していなかったのを修正
・通常表示のときコントロール下部のマージンが1px少なくなってたのを修正
・シーク後にドロップカウントをリセットするようにした
・BonDriver_Fileのソースを参考にPCRの取得部分をより合理的にした
  ・ソースの保管場所書きこんでくれた方サンクスです
・Time Offset Tableをもとに放送時刻を表示可能にした(個人的な需要)
・TVTestに合わせて最終ビルドをVisualC++2005(EE)にして/MT→/MDに変更
ver.0.4 (2011-08-23)
・人柱版表記をはずした(人柱さん達に感謝!)
・ボタンとシーク量、ほか細かい部分をカスタマイズ可能にした
・一時停止後も少しだけ再生が進んでしまうのを改善
・BonDriver_Pipeのパイプのバッファ量を効率的な値に修正
ver.0.3 (2011-08-20)
・スレッドの要望をもとに3点を追加した
  ・複数起動禁止時に複数起動されたとき、ファイルを開きなおすようにした
  ・追っかけ再生時、総再生時間の右端に'+'を付けた
  ・1時間未満の時刻表示を簡略化
・ストリームのアンダーランを抑制する微調整
・一時停止からの復帰時にカクつく場合があったのを修正
・BonDriver_Pipeつくってみた
・マルチディスプレイに対応できてなかったようなので修正(できたかな…)
ver.0.2 (2011-08-16)
・下記の修正では修正できてなかったため、さらに差し替えました
  ・修正分は"diff_02r1_02r2.txt"を参照
ver.0.2 (2011-08-15)
・バグ発見のため15日21時頃に差し替えました
  ・ファイルパス付で起動すると起動時にフリーズする不具合を修正(TVTestの起動完了
    を待たずにRESET_VIEWERを発行したため、TVTest内部でデッドロックした模様)
・スレッドで要望のあったもののうち、とりあえず容易な2点を追加した
  ・プラグインが有効なときはファイルをドラッグ&ドロップできるようにした
  ・キー割り当てを追加した
・コントロールの描画をすこし修正
・マルチディスプレイに対応したかもしれない(環境が無いので…)
ver.0.1 (2011-08-13)
・初版
